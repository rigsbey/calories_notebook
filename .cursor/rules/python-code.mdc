---
globs: *.py
---

# Python код для проекта калорийного блокнота

## Стиль кода:
- Используйте f-строки для форматирования строк
- Все комментарии и docstring на русском языке
- Используйте type hints где возможно
- Обработка ошибок через try/except с логированием

## Импорты:
- Группируйте импорты: стандартная библиотека, сторонние библиотеки, локальные модули
- Используйте относительные импорты для локальных модулей

## Обработка ошибок:
- Используйте декоратор @error_handler из utils.py для обработчиков
- Логируйте все ошибки с помощью logger.error()
- Отправляйте понятные сообщения пользователю при ошибках

## Асинхронность:
- Все функции обработки сообщений должны быть async
- Используйте await для всех асинхронных операций
- Правильно закрывайте сессии и соединения

## Пример структуры обработчика:
```python
@router.message(Command("start"))
@error_handler
async def start_handler(message: Message):
    """Обработчик команды /start"""
    # код обработчика
```

## Логирование:
- Используйте logger = logging.getLogger(__name__) в начале файла
- Логируйте важные события с уровнем INFO
- Ошибки с уровнем ERROR и exc_info=True